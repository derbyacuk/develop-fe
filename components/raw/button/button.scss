/**
 *  Global styling for buttons
 *
 *  Variants:
 *      primary (yellow), 
 *      secondary (blue),
 *      black (black),
 *      outline (mid-blue outline, white inset)
 *      inverse (white outline, mid-blue inset)
 *
 *  Sizes:
 *      large,
 *      default,
 *      small
 */
%button {
    @include disable-underlines;
    // to make the make targetting a specific button height easier, 
    // here's some math to work out the padding needed for the button variants
    $line-height: 1.3;
    $small-vertical-padding: (43 - 4 - 16 * $line-height) / 16 / 2 + 0em;
    $normal-vertical-padding: (49 - 4 - 18 * $line-height) / 18 / 2 + 0em;
    $large-vertical-padding: (54 - 4 - 18 * $line-height) / 18 / 2 + 0em;

    display: inline-block;
    position: relative;
    // this ensures that buttons placed next to other elements and themselves
    // are spaced slightly apart from each other
    margin-right: 10px;
    margin-bottom: 10px;
    border: solid 2px;
    border-radius: 2px;
    padding: $small-vertical-padding 1em;
    text-align: center;
    line-height: $line-height;
    font-family: $header-font;
    font-size: responsive 17px 18px;
    font-range: $mobile-portrait $tablet-landscape;
    font-weight: bold;
    overflow: hidden;
    padding-top: $small-vertical-padding;
    padding-bottom: $small-vertical-padding;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;

    @include for-tablet-portrait-up {
        padding-top: $normal-vertical-padding;
        padding-bottom: $normal-vertical-padding;
    }

    &:last-child {
        margin-right: 0;
    }

    &,
    &:link {
        text-decoration: none;
    }
}

.button {

    &-outline {
        @extend %button;
        border-color: $mid-blue;
        background-color: transparent;

        &,
        &:link {
            color: $mid-blue;
        } 
    }
}

/*********
V2 BUTTONS
**********/
// WOO! !important declaration escalation! Thanks everybody!
.button.v2 {
    // to make the make targetting a specific button height easier, 
    // here's some math to work out the padding needed for the button variants
    // WHAAAAAT IS THIS?!
    $line-height: 1.3;
    $small-vertical-padding: (43 - 4 - 16 * $line-height) / 16 / 2 + 0em;
    $normal-vertical-padding: (49 - 4 - 18 * $line-height) / 18 / 2 + 0em;
    $large-vertical-padding: (54 - 4 - 18 * $line-height) / 18 / 2 + 0em;

    padding: $small-vertical-padding 1em;

    @include for-tablet-portrait-up {
      padding: $normal-vertical-padding 1em;
    }

    background-image: linear-gradient(
      90deg,
      var(--buttondefault) 0%,
      var(--buttondefault) 50%,
      var(--buttonhover) 50%,
      var(--buttonhover) 100%
    );
    background-color: var(--white);
    background-size: 201% 100%; // 201% because at 200% you can get a teeny-weeny overlap on the right.
    background-position: 0% 0%;
    border: 2px solid var(--buttonborder);
    border-radius: 2px;
    color: transparent;
    cursor: pointer;
    font-size: 16px;
    font-family: sans-serif;
    font-weight: bold;
    position: relative;
  }
  
  .button.v2 .button-text {

    background-image: linear-gradient(
      90deg,
      var(--buttontextdefault) 0%,
      var(--buttontextdefault) 50%,
      var(--buttontexthover) 50%,
      var(--buttontexthover) 100%
    );
    -webkit-background-clip: text;
    background-clip: text;
    background-size: 201% 100%;
    background-position: 0% 0%;
    color: transparent;
    position: static;
    z-index: -1;
  }
  
  // Button outline just reverses the
  // Colour relationship.
  .button.v2.button-outline {
    background-image: linear-gradient(
      90deg,
      var(--buttonhover) 0%,
      var(--buttonhover) 50%,
      var(--buttondefault) 50%,
      var(--buttondefault) 100%
    ) !important;

    .button-text {
      background-image: linear-gradient(
        90deg,
        var(--buttontexthover) 0%,
        var(--buttontexthover) 50%,
        var(--buttontextdefault) 50%,
        var(--buttontextdefault) 100%
      );
    }
  }

  .button.v2:hover,
  .button.v2:hover > .button-text {
    animation: buttonin 0.15s cubic-bezier(0.8, 0.37, 0.21, 0.8) 0s forwards;
  }
  
  .button.v2,
  .button.v2 .button-text {
    animation: buttonout 0.15s cubic-bezier(0.8, 0.37, 0.21, 0.8) 0s forwards;
  }
  
  .footer-link.button-text {
      line-height: 1.25;
  }

  @keyframes buttonin {
    0% {
      background-position: 0% 0%;
    }
  
    100% {
      background-position: -100% 0%;
    }
  }
  
  @keyframes buttonout {
    0% {
      background-position: -100% 0%;
    }
  
    100% {
      background-position: 0% 0%;
    }
  }